<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
<%= csrf_meta_tags %>

<!-- ******** Jquery UI ********* -->
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<!-- ******** Page setup ********* -->
<script type='text/javascript'>pageSetUp();</script>

<!-- ******** Date-time picker ********* -->
<script type='text/javascript'>
	$.datetimepicker.setLocale('es');

	$('.datetimepicker').datetimepicker({
		lazyint : true,
		//mask:true,
		format : 'd/m/Y H:i'

	});

	$('.date-picker').datetimepicker({
		lazyint : true,
		timepicker : false,
		//mask:true,
		format : 'd/m/Y',
		closeOnDateSelect : true,
		scrollInput : false
	});

	//Mask del datetimepicker
	$('.date-picker').mask('00/00/0000');
	$('.datetimepicker').mask('00/00/0000 00:00'); 
</script>

<!-- ********Autocomplete (remoto JSON) ********* -->
<script>
	$(function() {
		function log(message) {
			$("<div>").text(message).prependTo("#log");
			$("#log").scrollTop(0);
		}


		$("#autocomplete").autocomplete({
			source : function(request, response) {
				$.ajax({
					url : "/thing_parts.json",
					dataType : "json",
					data : {
						term : request.term,

					},
					success : function(data) {

						dataMapped = $.map(data, function(item) {
							return {
								label : item.name,
								value : item.name,
								id : item.id

							};

						});
						response(dataMapped);
						//console.log("id: "+dataMapped[0].id);
					}
				});
			},
			minLength : 1,
			select : function(event, ui) {
				log(ui.item ? "Selected: " + ui.item.label : "Nothing selected, input was " + this.value);
			},
			open : function() {
				$(this).removeClass("ui-corner-all").addClass("ui-corner-top");
			},
			close : function() {
				$(this).removeClass("ui-corner-top").addClass("ui-corner-all");
			}
		});
	});

</script>

<script>
	//AUTOCOMPLETE DROPDOWN

	/*var temp = {
	 "1" : "string1",
	 "2" : "string2",
	 "3" : "string3",
	 "4" : "string4",
	 "5" : "string5"
	 };*/

	var temp = [{
		"id" : 6,
		"name" : "test3",
		"field1" : "test3"
	}, {
		"id" : 5,
		"name" : "test2",
		"field1" : "test2"
	}, {
		"id" : 4,
		"name" : "test1",
		"field1" : "fild1"
	}]
	console.log(temp);

	var $select = $('#multiple-select');
	$select.find('option').remove();
	$.each(temp, function(key, value) {

		//$select.append('<option value=' + key + '>' + value + '</option>');
	}); 
</script>

<script>
	//Bootstrap tour
	// Instance the tour

	$("#btn-tour").click(function() {

		var tour = new Tour({
		backdrop:true,
		storage:false,
		steps : [{
		element : "#hide-menu",
		title : "Mostrar menú",
		content : "Abre o cierra el menu principal (barra izquierda)"
		}, {
		element : "#left-panel",
		title : "Panel izquierdo",
		content : "Contiene la información del usuario y el menú de navegación"
		}, {
		element : "#login-info",
		title : "Información del usuario",
		content : "¿Quién está logueado?"
		}, {
		element : "#left-panel nav",
		title : "Menú principal",
		content : "Acceso a odas las secciones del sitio"
		}, {
		element : "#logout",
		title : "Cerrar sesión",
		content : "Da clic aqui para cerrar sesión"
		}, {
		element : "#timeline",
		title : "Línea de tiempo",
		content : "Puedes ver toda la actividad de los usarios, ordenada cronológicamente",
		path : "/welcome/prueba.html"
		}]
		
	});

	tour.init();
	tour.start(true);
	});

	// Initialize the tour
	//tour.init();

	// Start the tour
	//tour.start();
</script>
<script>
	//ostrar / ocutar detalles en timeline
	$(function() {

		$("#show-details").click(function() {
			$("#detalles").toggle("slow");

			if ($(this).text() == 'Mostrar detalles') {
				$(this).text('Ocultar detalles');
			} else {
				$(this).text('Mostrar detalles');
			}

		});
	}); 
</script>

<%= yield :javascript_per_page %>